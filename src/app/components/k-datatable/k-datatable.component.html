<div id="k-table-container" *ngIf="data && filterTable && startedItems && orderStatus && pagination" [ngStyle]="{
        'max-height': data?.style?.height ?  data.style.height == 'full' ? '100vh' : data.style.height + 'px' : 'auto',
        'overflow-y': data?.style?.overflowY ? data.style.overflowY : 'auto',
        'max-width': data?.style?.width && data.style.width != 'full' ?  data.style.width + 'px' : 'auto',
        'width': data?.style?.width == 'full' ?  '100%' : 'auto',
        'overflow-x': data?.style?.overflowX ? data.style.overflowX : 'auto'
    }">
    <table [ngStyle]="{
        'width': data?.style?.width == 'full' ? '100%' : 'auto'
    }">
        <thead [ngStyle]="{'position': data.style?.stickyHeader ? 'sticky' : 'auto'}">
            <tr>
                <td [attr.colspan]="data.header.length">
                    <div>
                        <i [title]="data?.content?.add? data?.content?.add : 'Add'"
                            (click)="emitEvent({event: 'add'})"></i>
                        <i *ngIf="filterTable.length>0"
                            [title]="data?.content?.filter? data?.content?.filter : 'Filter'"
                            (click)="isFilter=!isFilter" [ngClass]="{'k-icon-active': isFilter}"></i>
                    </div>
                    <div [ngClass]="{'k-disabled': pagination.total==0}">
                        <select (change)="changeNumberOfElementsPerPage($event)">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="30">30</option>
                            <option value="50">50</option>
                            <option value="-1">{{data?.content?.allItems? data?.content?.allItems : 'All'}}
                            </option>
                        </select>
                        &nbsp;&nbsp;
                        <i
                            (click)="pagination.current = pagination.current == 1 ? pagination.total : pagination.current - 1"></i>
                        <input type="text" [(ngModel)]="pagination.current"
                            (input)="pagination.current = pagination.current > pagination.total ? pagination.total : pagination.current < 1 ? 1 : pagination.current" />
                        / {{pagination.total}}
                        <i
                            (click)="pagination.current = pagination.current == pagination.total ? 1 : pagination.current + 1"></i>
                    </div>
                </td>
            </tr>
            <tr>
                <th *ngFor="let header of data?.header; let i=index"
                    [ngStyle]="{'width': header?.width ? header.width + 'px' : 'auto' }">
                    {{header?.name}}
                    <ng-container *ngIf="header?.order">
                        <i [ngClass]="{'k-icon-active': orderStatus.index==i && orderStatus.type =='DESC'}"
                            (click)="order(i, 'DESC')"></i>
                        <i [ngClass]="{'k-icon-active': orderStatus.index==i && orderStatus.type =='ASC'}"
                            (click)="order(i, 'ASC')"></i>
                    </ng-container>
                </th>
            </tr>
            <tr *ngIf="isFilter">
                <td *ngFor="let header of data?.header; let i=index">
                    <input *ngIf="header?.filter" type="text" placeholder="{{header?.name}}"
                        [(ngModel)]="filterTable[i]" name="{{header?.name}}" (input)="filter()" autocomplete="off" />
                </td>
            </tr>
        </thead>
        <tbody>
            <tr
                *ngFor="let item of data?.items | slice: (pagination.current-1)*pagination.elementsPerPage : pagination.elementsPerPage != -1 ? pagination.current*pagination.elementsPerPage : data.items.length; let i = index">
                <ng-container *ngFor="let field of item?.data; let j=index">
                    <ng-container
                        *ngIf="!field.condition || evalCondition(field.condition, j); else elseConditionvalue">
                        <td *ngIf="data.header[j].type=='text' || data.header[j].type=='number'" [class]="field?.style">
                            {{field?.value}}</td>
                        <td *ngIf="data.header[j].type=='email'">
                            <a href="mailto:{{field?.value}}" [class]="field?.style">{{field?.value}}</a>
                        </td>
                        <td *ngIf="data.header[j].type=='link'">
                            <a href="{{field?.url}}" target="_blank" [class]="field?.style">{{field?.value}}</a>
                        </td>
                        <td *ngIf="data.header[j].type=='date'" [class]="field?.style">{{field?.value}}</td>
                        <td *ngIf="data.header[j].type=='bold'" [class]="field?.style"><b>{{field?.value}}</b></td>
                        <td *ngIf="data.header[j].type=='image'"><img [src]="field?.src" [class]="field?.style"
                                [width]="field?.width" [height]="field?.height" />
                        </td>
                        <td *ngIf="data.header[j].type=='badge'"><label class="label k-red">{{field.value}}</label>
                        </td>
                        <td *ngIf="data.header[j].type=='list'">
                            <ul [class]="field?.style">
                                <li *ngFor="let li of field.value">{{li}}</li>
                            </ul>
                        </td>
                        <td *ngIf="data.header[j].type=='mini-buttons'">
                            <div>
                                <a *ngFor="let button of field?.value" (click)="emitEvent({
                                                            event: button.event,
                                                            id: item.id
                                                          })"><i [class]="button?.style"
                                        [title]="button?.title"></i>&nbsp;&nbsp;&nbsp;&nbsp;
                                </a>
                            </div>
                        </td>
                        <td *ngIf="data.header[j].type=='buttons'">
                            <div>
                                <button *ngFor="let button of field?.value" [class]="button?.style" (click)="emitEvent({
                                                        event: button.event,
                                                        id: item.id
                                                      })">{{button?.title}}</button>&nbsp;&nbsp;&nbsp;&nbsp;
                            </div>
                        </td>
                        <td *ngIf="data.header[j].type=='progress'" [class]="field?.style">
                            <div class="k-progress">
                                <div [ngStyle]="{'width': (field.value * 180) / 100 + 'px'  }">

                                </div>
                            </div>
                        </td>
                    </ng-container>
                    <ng-template #elseConditionvalue>
                        <td></td>
                    </ng-template>
                </ng-container>
            </tr>
        </tbody>
        <tfoot [ngStyle]="{'position': data.style?.stickyFooter ? 'sticky' : 'auto'}">
            <tr *ngIf="data.footer">
                <th *ngFor="let footer of data?.footer">{{footer}}</th>
            </tr>
        </tfoot>
    </table>
</div>