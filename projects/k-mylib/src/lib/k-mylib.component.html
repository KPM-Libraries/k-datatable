<div id="k-table-container" *ngIf="data && filterTable && startedItems && orderStatus && pagination" [ngStyle]="{
        'max-height': data?.style?.height ?  data.style.height == 'full' ? '100vh' : data.style.height + 'px' : 'auto',
        'overflow-y': data?.style?.overflowY ? data.style.overflowY : 'auto',
        'max-width': data?.style?.width && data.style.width != 'full' ?  data.style.width + 'px' : 'auto',
        'width': data?.style?.width == 'full' ?  '100%' : 'auto',
        'overflow-x': data?.style?.overflowX ? data.style.overflowX : 'auto',
        'text-align': data?.style?.textAlign ? data.style.textAlign : 'left'
    }">
    <table [ngStyle]="{
        'width': data?.style?.width == 'full' ? '100%' : 'auto'
    }">
        <thead [ngStyle]="{'position': data.style?.stickyHeader ? 'sticky' : 'auto'}">
            <tr>
                <td [attr.colspan]="data.header.length">
                    <div>
                        <i [ngStyle]="{'display': data?.addItem ? 'auto' : 'none'}"
                            [title]="data?.translation?.add? data?.translation?.add : 'Add'"
                            (click)="emitEvent({name: 'add'})"></i>
                        <i *ngIf="filterTable.length>0"
                            [title]="data?.translation?.filter? data?.translation?.filter : 'Filter'"
                            (click)="isFilter=!isFilter" [ngClass]="{'k-icon-active': isFilter}"></i>
                    </div>
                    <div [ngClass]="{'k-disabled': pagination.total==0}">
                        <select (change)="changeNumberOfElementsPerPage($event)">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="30">30</option>
                            <option value="50">50</option>
                            <option value="-1">{{data?.translation?.allItems? data?.translation?.allItems : 'All'}}
                            </option>
                        </select>
                        &nbsp;&nbsp;
                        <i
                            (click)="pagination.current = pagination.current == 1 ? pagination.total : pagination.current - 1"></i>
                        <input type="text" [(ngModel)]="pagination.current"
                            (input)="pagination.current = pagination.current > pagination.total ? pagination.total : pagination.current < 1 ? 1 : pagination.current" />
                        / {{pagination.total}}
                        <i
                            (click)="pagination.current = pagination.current == pagination.total ? 1 : pagination.current + 1"></i>
                    </div>
                </td>
            </tr>
            <tr>
                <th *ngFor="let header of data?.header; let i=index"
                    [ngStyle]="{'width': header?.width ? header.width + 'px' : 'auto' }">
                    {{header?.name}}
                    <ng-container *ngIf="header?.order">
                        <i [ngClass]="{'k-icon-active': orderStatus.index==i && orderStatus.type =='DESC'}"
                            (click)="order(i, 'DESC')"></i>
                        <i [ngClass]="{'k-icon-active': orderStatus.index==i && orderStatus.type =='ASC'}"
                            (click)="order(i, 'ASC')"></i>
                    </ng-container>
                </th>
            </tr>
            <tr *ngIf="isFilter">
                <td *ngFor="let header of data?.header; let i=index">
                    <input *ngIf="header?.filter" type="text" placeholder="{{header?.name}}"
                        [(ngModel)]="filterTable[i]" name="{{header?.name}}" (input)="filter()" autocomplete="off" />
                </td>
            </tr>
        </thead>
        <tbody>
            <tr
                *ngFor="let item of data?.items | slice: (pagination.current-1)*pagination.elementsPerPage : pagination.elementsPerPage != -1 ? pagination.current*pagination.elementsPerPage : data.items.length; let i = index">
                <ng-container *ngFor="let field of item?.data; let j=index">
                    <ng-container
                        *ngIf="!field.condition || evalCondition(field.condition, j); else elseConditionvalue">
                        <td *ngIf="data.header[j].type=='text' || data.header[j].type=='number'"
                            [ngClass]="[field?.styleClass ? field?.styleClass : '']">
                            {{field?.content}}</td>
                        <td *ngIf="data.header[j].type=='email'">
                            <a [ngClass]="[field?.styleClass ? field?.styleClass : '']"
                                href="mailto:{{field?.content}}">{{field?.content}}</a>
                        </td>
                        <td *ngIf="data.header[j].type=='link'">
                            <a href="{{field?.content?.url}}" target="_blank"
                                [ngClass]="[field?.styleClass ? field?.styleClass : '']">{{field?.content?.value}}</a>
                        </td>
                        <td *ngIf="data.header[j].type=='date'"
                            [ngClass]="[field?.styleClass ? field?.styleClass : '']">
                            {{field?.content?.value}}
                        </td>
                        <td *ngIf="data.header[j].type=='bold'"
                            [ngClass]="[field?.styleClass ? field?.styleClass : '']">
                            <b>{{field?.content}}</b>
                        </td>
                        <td *ngIf="data.header[j].type=='image'">
                            <img [src]="field?.content?.src" [width]="field?.content?.width"
                                [height]="field?.content?.height" [alt]="field?.content?.alt"
                                [ngClass]="[field?.styleClass ? field?.styleClass : '']" />
                        </td>
                        <td *ngIf="data.header[j].type=='badge'">
                            <label [ngClass]="[field?.styleClass ? field?.styleClass : '']">{{field?.content}}</label>
                        </td>
                        <td *ngIf="data.header[j].type=='list'">
                            <ul [ngClass]="[field?.styleClass ? field?.styleClass : '']">
                                <li *ngFor="let li of field?.content">{{li}}</li>
                            </ul>
                        </td>
                        <td *ngIf="data.header[j].type=='progress'">
                            <div class="k-progress" [ngClass]="[field?.styleClass ? field?.styleClass : '']">
                                <div [ngStyle]="{'width': (field?.content * 180) / 100 + 'px'  }">

                                </div>
                            </div>
                        </td>
                        <td *ngIf="data.header[j].type=='mini-buttons'">
                            <div>
                                <a *ngFor="let button of field?.content" (click)="emitEvent({
                                                            name: button.event,
                                                            outputData: item.inputData
                                                          })"><i
                                        [ngClass]="[button?.styleClass ? button?.styleClass : '']"
                                        [title]="button?.title"></i>&nbsp;&nbsp;&nbsp;&nbsp;
                                </a>
                            </div>
                        </td>
                        <td *ngIf="data.header[j].type=='buttons'">
                            <div>
                                <button *ngFor="let button of field?.content"
                                    [ngClass]="[button?.styleClass ? button?.styleClass : '']" (click)="emitEvent({
                                                        name: button.event,
                                                        outputData: item.inputData
                                                      })">{{button?.title}}</button>&nbsp;&nbsp;&nbsp;&nbsp;
                            </div>
                        </td>
                    </ng-container>
                    <ng-template #elseConditionvalue>
                        <td></td>
                    </ng-template>
                </ng-container>
            </tr>
        </tbody>
        <tfoot [ngStyle]="{'position': data.style?.stickyFooter ? 'sticky' : 'auto'}">
            <tr *ngIf="data.footer">
                <th *ngFor="let footer of data?.footer">{{footer}}</th>
            </tr>
        </tfoot>
    </table>
</div>